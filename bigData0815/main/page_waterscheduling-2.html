<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>水质调度</title>
		<link rel="stylesheet" href="css/style_waterscheduling.css" />
		<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    	<script type="text/javascript" src="js/common.js"></script>		
	</head>
		
	<style type="text/css">	
		@font-face{
	     font-family: 'yejing'; 
	     src:
	         url('font/yejing5.ttf') format('truetype');
		}

		select.sty1 {
          /*Chrome和Firefox里面的边框是不一样的，所以复写了一下*/
          border: solid 0px #000;
          border:none;
          color:#00F6FF;
          font-size: 16pt;
          /*height: 38px; 
          line-height: 38px;*/
          /*很关键：将默认的select选择框样式清除*/
          appearance:none;
          -moz-appearance:none;
          -webkit-appearance:none;        
          /*在选择框的最右侧中间显示小箭头图片*/
          background: no-repeat scroll right center transparent;          
        }
        
         .selectoptionbg{
		  background-color:#0E1C3B;
		  color:#00F6FF;
		  }
        	
		/*.ol-overlaycontainer-stopevent
		{
			display:none;
		} */
		
		/*横条样式*/
		input[type=range] {
		  -webkit-appearance: none;/*清除系统默认样式*/
		  width: 100%;
		  background: -webkit-linear-gradient(#0087ED, #0087ED) no-repeat, #ddd;/*设置左边颜色为#61bd12，右边颜色为#ddd*/
		  background-size: 100% 100%;/*设置左右宽度比例*/
		  /*height: 3px;/*横条的高度*/*/
		}
		/*拖动块的样式*/
		input[type=range]::-webkit-slider-thumb {
		  -webkit-appearance: none;/*清除系统默认样式*/
		  height: 15px;/*拖动块高度*/
		  width: 15px;/*拖动块宽度*/
		  background: #fff;/*拖动块背景*/
		  border-radius: 50%; /*外观设置为圆形*/
		  border: solid 5px #ddd; /*设置边框*/
		}
		
		.swal-modal{
			background-color: #00FCFF;
		}
		
		.ol-control{
			display: none;
		}
		     /**地图提示框*/
     .ol-popup {
				position: absolute;
				background-color: rgba(0, 0, 0, .3);
				-webkit-filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2));
				filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2));
				/*padding: 5px 7px;*/
				border-radius: 5px;
				border: 1px solid #cccccc;
				/*border: none;*/
				padding: 10px;
				color: white;
				bottom: 12px;
				left: -50px;
				min-width: 220px;
			}
      .ol-popup:after, .ol-popup:before {
        top: 100%;
        border: solid transparent;
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
      }
      .ol-popup:after {
        border-top-color: white;
        border-width: 10px;
        left: 48px;
        margin-left: -10px;
      }
      .ol-popup:before {
        border-top-color: #cccccc;
        border-width: 11px;
        left: 48px;
        margin-left: -11px;
      }
      .ol-popup-closer {
        text-decoration: none;
        position: absolute;
        top: 2px;
        right: 8px;
      }
      .ol-popup-closer:after {
        content: "✖";
        color: #00FCFF;
      }
           /*********************************************/
  		.shuizhi_dianjitanchu{
			width: 1280px;
			height: 920px;
			background-image: url(images/a_tanchuan.png);
			position: absolute;
			margin-top: -100px;
			margin-left:-1200px;
			z-index: 99999;
			display: none;
			background-repeat: no-repeat;
			background-size: cover;
		}  
		.shuizhi_logo{
			width: 75px;
			height: 50px;
			/*background-color: black;*/
			margin-left: 160px;
			margin-top: 85px;
			z-index: 999;
			position: absolute;
			background-image: url(images/a_logo.png);
			background-repeat: no-repeat;
			background-size: cover;
		}
		.shuizhi_dianjitanchu h4{
			color: white;
			text-align: center;
			padding-top: 30px;
			font-size: 2.5em;
			padding-bottom: 50px;
			margin-left: 450px;
			float: left;
			text-shadow:5px 2px 6px #000;
		}
		.shuizhi_dianjitanchu li{
			color: white;
			padding-left: 100px;
			font-size:16pt;
			width: 1100px;
			list-style-type:none;
			float: left;
			text-shadow:5px 2px 6px #000;
			font-family:"宋体";
		}
		.shuizhi_riqi{
			color: white;
			text-align: center;
			padding-left: 550px;
			font-size: 1.5em;
			padding-bottom: 0px;
			position: absolute;
			margin-top: 140px;
			/*background-color: wheat;*/
			float: left;
			text-shadow:5px 2px 6px #000;
		}
		.shuizhi_qianzi1{
			text-indent:2em;
		}
		.shuizhi_qianzi{
			text-indent:0em;
			font-weight: bold;
		}
		.shuizhi_qianzi2{
			text-indent:2em;
			font-weight: bold;
		}
		.tanchuang_biaoge_zuoshang{
			margin-top: 00px;
			margin-left: 100px;
			font-size: 15pt;
			float: left;
		}
		.tanchuang_biaoge_youshang{			
			margin-top: -170px;
			margin-left: 660px;
			font-size: 15pt;
			float: left;
		}
		.tanchuang_biaoge_youshang1{			
			margin-top: -169px;
			margin-left: 660px;
			font-size: 15pt;
			float: left;
		}
		.sszxgs_xiabiao{
			position: absolute;
			/*width: 100px;
			height: 100px;
			background-color: red;*/
			top: 700px;
			right: 200px;
			font-size: 22pt;
			font-family:"宋体";
			text-shadow:5px 2px 6px #000;
		}
	</style>
	
	<body>
		<header>		
			<div scrolling="no" allowtransparency="true" style="font-size:14px; position: absolute; left: 50px; top:-5px;width:600px;height: 50px; display:inline;">
				<img src="images/pie.png" style="width: 100px; height: 50px;"/>				
			</div>
			<div class="masked1" style="font-weight: bold;">水 质 调 度</div>
					
			<div scrolling="no" allowtransparency="true" style="font-size:14px; position: absolute; left: 1350px; top:22px; width:550px;height: 40px; display:inline;">
				<ul class="menu">
					<li><a href="page_home.html">管控大屏</a></li>
					<li><a href="#">水务预警</a>
						<ul class="submenu">
							<li><a href="page_shuiqing.html">水情预警</a></li>
							<li><a href="page_shuizhi.html">水质预警</a></li>
							<li><a href="page_weiyi.html">工程安全</a></li>
							<li><a href="page_videocenter.html">视频预警</a></li>
						</ul>
					</li>
					<li><a href="#" style="color:#00FCFF">流域调度</a>
						<ul class="submenu">
							<li><a href="page_waterFloodScheduling.html">防洪调度</a></li>
							<li><a href="page_waterscheduling.html" style="color:#00FCFF">水质调度</a></li>
						</ul>
					</li>
					<li><a href="page_guanyang.html">河道管养</a></li>
				</ul>
			</div>
		</header>
					
		<canvas id="canvas" style="position: absolute; left: 680px; top:0px; width: 580px; height: 80px;"></canvas>
		
		<div id="content">
			<div class="content_center">
				<div class="center_top">
					<div class="title"><img id="switchMapZoomID" src="images/icon03.png" /> 地图</div>					
					<span id="localtime" style="font-size:18pt; font-family:yejing; font-weight:bold;position: absolute; left: 100px; top:140px; width：100px;z-index: 9990;">10:00:00</span>
					<span id="localtime2" style="font-size:40pt; font-family:yejing; font-weight:bold;position: absolute; left: 220px; top:140px; width：100px;z-index: 9990;">10:00:00</span>
					<iframe name="weather_inc" src="http://i.tianqi.com/index.php?c=code&id=48&color=%232FEDA5" width="440" height="45" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="position: absolute; left: 1120px; top:140px; z-index: 9990;"></iframe>
					
					<div class="center_top_con" id="distribution_map">
					</div>
							<div id="popup" class="ol-popup">
	      <a href="#" id="popup-closer" class="ol-popup-closer"></a>
	      <div id="popup-content"></div>
	    </div>
				</div>
								
				<div class="center_bot">
					<div class="title"><img src="images/icon04.png" /> 断面水质</div>
					<div id="centerBotDiv" class="chartpanel">
					</div>
					<div id="slider-range-max" class="rangDiv">
						<label style="color: #0087ED;font-size: 12pt;">时刻：</label>
						<input type="range" id="myRange" style="width: 1100px;" max="25" min="0" value="0" step="1" onchange="waterQIndexChange();">
						<label id="labelRangeValueID" style="color: #0087ED;font-size: 12pt;"> 10:00:00</label>
					</div>
				</div>
			</div>
			<div class="content_right">
				<div class="news_report">
					<div class="title"><img src="images/data_select.png" onclick="showDateSelect();"/> <span id="chuxian_dianji">调度方案<span></span></div><!--<img src="images/icon05.png" />-->
					<div class="news_list">
						<table id="planTable" class="panel-table" border="1">
	                        <tbody id="">
	                        <tr class="aaa" align="center">
	                        	<td v-for="item in tableHeader" style="color: #00fcff; font-size: 18px; padding: 5px 0;">{{ item.categories }}</td>
	                        </tr>
	                        </tbody>
	                    </table>
					</div>
				</div>
							<!------------------------------------------------------->
				<div class="shuizhi_dianjitanchu" id="shuizhi_dianjitanchu">
					<div class="shuizhi_logo"></div>
					<h4>梧桐山河流域水质分析计算简报</h4>
					<div class="shuizhi_riqi">日期:<label id="show_riqi"></label></div>
					<li class="shuizhi_qianzi1">依据梧桐山河流域水质监测数据，结合当前梧桐山河实时流量数据，在设定断面初始水质浓度条件下，通过水力学模型和水质模型分析计算，对流域内河道断面水质进行沿程扩散分析计算，具体如下：</li>
					<li>&nbsp;</li>
					
					<table class="tanchuang_biaoge_zuoshang" border="1">
					  <tr>
					    <th>总氮(单位mg/l)</th>
					    <th>初始浓度</th>
					    <th>扩散0.5小时</th>
					    <th>扩散1小时</th>
					    <th>扩散2小时</th>
					  </tr>
					  <tr>
					    <td>横沥口断面</td>
					    <td align="center"><label id="hlk_zong_dan">xx</label></td>
					    <td align="center"><label id="hlk_zong_dan_ban">xx</label></td>
					    <td align="center"><label id="hlk_zong_dan_yi">xx</label></td>
					    <td align="center"><label id="hlk_zong_dan_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>茂仔水断面</td>
					    <td align="center"><label id="mzs_zong_dan">xx</label></td>
					    <td align="center"><label id="mzs_zong_dan_ban">xx</label></td>
					    <td align="center"><label id="mzs_zong_dan_yi">xx</label></td>
					    <td align="center"><label id="mzs_zong_dan_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>赤水洞水断面</td>
					    <td align="center"><label id="cs_zong_dan">xx</label> </td>
					    <td align="center"><label id="cs_zong_dan_ban">xx</label> </td>
					    <td align="center"><label id="cs_zong_dan_yi">xx</label> </td>
					    <td align="center"><label id="cs_zong_dan_er">xx</label> </td>
					  </tr>
					  <tr>
					    <td>新田仔水断面</td>
					    <td align="center"><label id="xt_zong_dan">xx</label></td>
					    <td align="center"><label id="xt_zong_dan_ban">xx</label></td>
					    <td align="center"><label id="xt_zong_dan_yi">xx</label></td>
					    <td align="center"><label id="xt_zong_dan_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>深圳水库入库断面</td>
					    <td align="center"><label id="sz_zong_dan">xx</label></td>
					    <td align="center"><label id="sz_zong_dan_ban">xx</label></td>
					    <td align="center"><label id="sz_zong_dan_yi">xx</label></td>
					    <td align="center"><label id="sz_zong_dan_er">xx</label></td>
					  </tr>
					</table>
					
					<table class="tanchuang_biaoge_youshang" border="1">
					  <tr>
					    <th>总磷(单位mg/l)</th>
					    <th>初始浓度</th>
					    <th>扩散0.5小时</th>
					    <th>扩散1小时</th>
					    <th>扩散2小时</th>
					  </tr>
					  <tr>
					    <td>横沥口断面</td>
					    <td align="center"><label id="hlk_zong_lin">xx</label></td>
					    <td align="center"><label id="hlk_zong_lin_ban">xx</label></td>
					    <td align="center"><label id="hlk_zong_lin_yi">xx</label></td>
					    <td align="center"><label id="hlk_zong_lin_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>茂仔水断面</td>
					    <td align="center"><label id="mzs_zong_lin">xx</label></td>
					    <td align="center"><label id="mzs_zong_lin_ban">xx</label></td>
					    <td align="center"><label id="mzs_zong_lin_yi">xx</label></td>
					    <td align="center"><label id="mzs_zong_lin_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>赤水洞水断面</td>
					    <td align="center"><label id="cs_zong_lin">xx</label> </td>
					    <td align="center"><label id="cs_zong_lin_ban">xx</label> </td>
					    <td align="center"><label id="cs_zong_lin_yi">xx</label> </td>
					    <td align="center"><label id="cs_zong_lin_er">xx</label> </td>
					  </tr>
					  <tr>
					    <td>新田仔水断面</td>
					    <td align="center"><label id="xt_zong_lin">xx</label></td>
					    <td align="center"><label id="xt_zong_lin_ban">xx</label></td>
					    <td align="center"><label id="xt_zong_lin_yi">xx</label></td>
					    <td align="center"><label id="xt_zong_lin_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>深圳水库入库断面</td>
					    <td align="center"><label id="sz_zong_lin">xx</label></td>
					    <td align="center"><label id="sz_zong_lin_ban">xx</label></td>
					    <td align="center"><label id="sz_zong_lin_yi">xx</label></td>
					    <td align="center"><label id="sz_zong_lin_er">xx</label></td>
					  </tr>
					</table>
					<table class="tanchuang_biaoge_zuoshang" border="1">
					  <tr>
					    <th>氨氮(单位mg/l)</th>
					    <th>初始浓度</th>
					    <th>扩散0.5小时</th>
					    <th>扩散1小时</th>
					    <th>扩散2小时</th>
					  </tr>
					  <tr>
					    <td>横沥口断面</td>
					    <td align="center"><label id="hlk_an_dan">xx</label></td>
					    <td align="center"><label id="hlk_an_dan_ban">xx</label></td>
					    <td align="center"><label id="hlk_an_dan_yi">xx</label></td>
					    <td align="center"><label id="hlk_an_dan_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>茂仔水断面</td>
					    <td align="center"><label id="mzs_an_dan">xx</label></td>
					    <td align="center"><label id="mzs_an_dan_ban">xx</label></td>
					    <td align="center"><label id="mzs_an_dan_yi">xx</label></td>
					    <td align="center"><label id="mzs_an_dan_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>赤水洞水断面</td>
					    <td align="center"><label id="cs_an_dan">xx</label> </td>
					    <td align="center"><label id="cs_an_dan_ban">xx</label> </td>
					    <td align="center"><label id="cs_an_dan_yi">xx</label> </td>
					    <td align="center"><label id="cs_an_dan_er">xx</label> </td>
					  </tr>
					  <tr>
					    <td>新田仔水断面</td>
					    <td align="center"><label id="xt_an_dan">xx</label></td>
					    <td align="center"><label id="xt_an_dan_ban">xx</label></td>
					    <td align="center"><label id="xt_an_dan_yi">xx</label></td>
					    <td align="center"><label id="xt_an_dan_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>深圳水库入库断面</td>
					    <td align="center"><label id="sz_an_dan">xx</label></td>
					    <td align="center"><label id="sz_an_dan_ban">xx</label></td>
					    <td align="center"><label id="sz_an_dan_yi">xx</label></td>
					    <td align="center"><label id="sz_an_dan_er">xx</label></td>
					  </tr>
					</table>
					<table class="tanchuang_biaoge_youshang1" border="1">
					  <tr>
					    <th>COD(单位mg/l)</th>
					    <th>初始浓度</th>
					    <th>扩散0.5小时</th>
					    <th>扩散1小时</th>
					    <th>扩散2小时</th>
					  </tr>
					  <tr>
					    <td>横沥口断面</td>
					    <td align="center"><label id="hlk_COD_zhi">xx</label></td>
					    <td align="center"><label id="hlk_COD_zhi_ban">xx</label></td>
					    <td align="center"><label id="hlk_COD_zhi_yi">xx</label></td>
					    <td align="center"><label id="hlk_COD_zhi_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>茂仔水断面</td>
					    <td align="center"><label id="mzs_COD_zhi">xx</label></td>
					    <td align="center"><label id="mzs_COD_zhi_ban">xx</label></td>
					    <td align="center"><label id="mzs_COD_zhi_yi">xx</label></td>
					    <td align="center"><label id="mzs_COD_zhi_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>赤水洞水断面</td>
					    <td align="center"><label id="cs_COD_zhi">xx</label> </td>
					    <td align="center"><label id="cs_COD_zhi_ban">xx</label> </td>
					    <td align="center"><label id="cs_COD_zhi_yi">xx</label> </td>
					    <td align="center"><label id="cs_COD_zhi_er">xx</label> </td>
					  </tr>
					  <tr>
					    <td>新田仔水断面</td>
					    <td align="center"><label id="xt_COD_zhi">xx</label></td>
					    <td align="center"><label id="xt_COD_zhi_ban">xx</label></td>
					    <td align="center"><label id="xt_COD_zhi_yi">xx</label></td>
					    <td align="center"><label id="xt_COD_zhi_er">xx</label></td>
					  </tr>
					  <tr>
					    <td>深圳水库入库断面</td>
					    <td align="center"><label id="sz_COD_zhi">xx</label></td>
					    <td align="center"><label id="sz_COD_zhi_ban">xx</label></td>
					    <td align="center"><label id="sz_COD_zhi_yi">xx</label></td>
					    <td align="center"><label id="sz_COD_zhi_er">xx</label></td>
					  </tr>
					</table>
					<div class="sszxgs_xiabiao">深水咨询公司</div>
				</div>
							<!------------------------------------------------------->
				
							
							
				<div class="news_report2">
					<div class="title"><img src="images/icon02.png" /> 考核断面</div>
					<div class="news_list2">
						<ul>
							<li style="margin-left: 80px;">
								断面名称：
								<select id="sectionSlID" class="sty1" onchange="circleChartChange();">
									<option class="selectoptionbg" value="1">横沥口</option>
									<option class="selectoptionbg" value="2">茂仔水</option>
									<option class="selectoptionbg" value="3">赤水洞水</option>
									<option class="selectoptionbg" value="4">新田仔</option>
									<option class="selectoptionbg" value="5">深圳水库</option>
								</select>
							</li>							
						</ul>
						<div class="report1">
							<p>水质分类</p>
							<small>{{waterQClass}}</small>
						</div>
						<div id="waterqcircleDiv" class="report2"></div>
						<ul>							
						<div id="waterqchart01ID" class="report_left">
						</div>
						<div id="waterqchart02ID" class="report_right">
						</div>
						<div id="waterqchart03ID" class="report_left">
						</div>
						<div id="waterqchart04ID" class="report_right">
						</div>
					</div>
					
				</div>
				
			</div>
		</div>
				
		<!--遮罩层-->
		<div class="bgPop"></div>
		
		<script>
		    $(document).ready(function () {
		        $('.pop-close').click(function () {
		            $('.bgPop,.pop').hide();
		        });
		        $('.click_pop').click(function () {
		            $('.bgPop,.pop').show();
		        });
		    })
		
		</script>
		<!--遮罩层-->
		<div class="bgPop2"></div>
		<!--弹出框-->
		<div class="pop2">
		    <div class="pop-top">
		        方案信息
		    </div>
		    <div class="pop-content">
		        <table id="pop2_tableID" class="panel-table" bordercolor="#deefff" border="1">
                    <tbody>
                    <tr class="aaa" style="font-size: 16px;" align="center" >
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr class="aaa" style="font-size: 16px;" align="center" >
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    </tbody>
                </table>
		    </div>
		    <div class="pop-foot">
		        <input type="button" value="确定" class="pop-cancel pop-close">
		    </div>
		</div>
		<script>
		    $(document).ready(function () {
		        $('.pop-close').click(function () {
		            $('.bgPop2,.pop2').hide();
		        });
		        $('.click_pop2').click(function () {
		            $('.bgPop2,.pop2').show();
		        });
		    })
		</script>
			
		<!--遮罩层-->
		<div class="bgPop3"></div>
		<!--弹出框-->
		<div class="pop3">
		    <div class="pop-top">
		        选择日期
		        <span class="pop-close">Ｘ</span>
		    </div>
		    <div class="pop-content">
		    	<div style="text-align: center;font-size: 40pt;height: 100%;vertical-align: middle;padding-top:60px;">
		    		<select id="dateYearSelectID" class="sty1" style="font-size: 40pt;">
						<option class="selectoptionbg" value="2019">2019</option>
						<option class="selectoptionbg" value="2">2018</option>
					</select>
					<label>年</label>
					<select id="dateMonthSelectID" class="sty1" style="font-size: 40pt;">
						<option class="selectoptionbg" value="1">01</option>
						<option class="selectoptionbg" value="2">02</option>
					</select>
					<label>月</label>
					<select id="dateDaySelectID" class="sty1" style="font-size: 40pt;">
						<option class="selectoptionbg" value="1">01</option>
						<option class="selectoptionbg" value="2">02</option>
					</select>
					<label>日</label>
		    	</div>		        
		    </div>
		    <div class="pop-foot">
		        <input id="dataSelectID" type="button" value="确定" class="pop-cancel pop-close">
		    </div>
		</div>
		<script>						
		    $(document).ready(function () {
		        $('.pop-close').click(function () {
		            $('.bgPop3,.pop3').hide();
		        });
		        $('.click_pop3').click(function () {
		            $('.bgPop3,.pop3').show();		            
		        });
		        
		        $("#dateYearSelectID").empty();
		        for(var tmpI = 2017; tmpI < 2030; tmpI++)
		        {
      				$("#dateYearSelectID").append("<option class='selectoptionbg' value='"+tmpI+"'>"+tmpI+"</option>'");
		        }
      			$("#dateMonthSelectID").empty();
		        for(var tmpI = 1; tmpI < 13; tmpI++)
		        {
		        	var tmpI2 = tmpI;
		        	if(tmpI<10)
		        		tmpI2 = "0"+tmpI;		        		
      				$("#dateMonthSelectID").append("<option class='selectoptionbg' value='"+tmpI+"'>"+tmpI2+"</option>'");
		        }
		        $("#dateDaySelectID").empty();
		        for(var tmpI = 1; tmpI < 32; tmpI++)
		        {
		        	var tmpI2 = tmpI;
		        	if(tmpI<10)
		        		tmpI2 = "0"+tmpI;
      				$("#dateDaySelectID").append("<option class='selectoptionbg' value='"+tmpI+"'>"+tmpI2+"</option>'");
		        }
		        $('#dataSelectID').click(function () {
		            var tmpStr = $("#dateYearSelectID").val();
		            if($("#dateMonthSelectID").val()<10)
		            	tmpStr += "-0"+$("#dateMonthSelectID").val();
		            else
		            	tmpStr += "-"+$("#dateMonthSelectID").val();
		            if($("#dateDaySelectID").val()<10)
		            	tmpStr += "-0"+$("#dateDaySelectID").val();	
		            else
		            	tmpStr += "-"+$("#dateDaySelectID").val();	
		            m_CurrentQueryData = tmpStr;
		            refreshSchedulingPlan(m_CurrentQueryData);
		        });		        
		    })
		</script>
		
		<!--背景动画        -->
		<script type="text/javascript" src="js/bgannimation.js" ></script>	
		<script type="text/javascript" src="js/jquery.min.js"></script>		
		<script type="text/javascript" src="js/echarts.min.js"></script>
		<script type="text/javascript" src="js/vue.min.js"></script>
		<script type="text/javascript" src="js/times.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
		
		<script type="text/javascript" src="js/CommonJS.js"></script>
		
		<!--调用op库-->	
		<link rel="stylesheet" href="css/ol.css" type="text/css">
		<script src="js/ol.js" type="text/javascript" charset="utf-8"></script>
		
		<link rel="stylesheet" type="text/css" href="overlay/popupoverlay.css" />
		<script type="text/javascript" src="overlay/popupoverlay.js"></script>
		<!--
        	作者：xwebsite@163.com
        	时间：2019-05-07
        	描述：地图相关操作
        -->
		<!--<script src="js/basicmap_waterscheduling.js" type="text/javascript" charset="utf-8"></script>-->
		
		<!-- sweet-alert库 -->
		<link href="css/sweet-alert.css" rel="stylesheet" type="text/css" />	
		<script src="js/sweet-alert.js"></script>
		
		<script>
			var d = new Date();
			var str = d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
			$("#show_riqi").text(str);
			
			
		function initialChartCircle(values)
		{
			var dom = document.getElementById("waterqcircleDiv");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			option = {
			    radar: [
			        {
			            indicator: [
			                { text: 'COD' },
			                { text: '总氮' },
			                { text: '总磷' },
			                { text: '氨氮' },
			                { text: 'PH' }
			            ],
			            center: ['50%', '50%'],
			            radius: 50,
			            startAngle: 90,
			            splitNumber: 4,
			            shape: 'circle',
			            name: {
			                formatter:'{value}',
			                textStyle: {
			                	fontSize: 14,
			                	padding: [-10, 0],
			                    color:'#72ACD1'
			                }
			            },
			            splitArea: {
			                areaStyle: {
			                    color: ['rgba(114, 172, 209, 0.2)',
			                    'rgba(114, 172, 209, 0.4)', 'rgba(114, 172, 209, 0.6)',
			                    'rgba(114, 172, 209, 0.8)', 'rgba(114, 172, 209, 1)'],
			                    shadowColor: 'rgba(0, 0, 0, 0.3)',
			                    shadowBlur: 10
			                }
			            },
			            axisLine: {
			                lineStyle: {
			                    color: 'rgba(255, 255, 255, 0.5)'
			                }
			            },
			            splitLine: {
			                lineStyle: {
			                    color: 'rgba(255, 255, 255, 0.5)'
			                }
			            }
			        }
			    ],
			    series: [
			        {
			            name: '雷达图',
			            type: 'radar',
			            itemStyle: {
			                emphasis: {
			                    // color: 各异,
			                    lineStyle: {
			                        width: 4
			                    }
			                }
			            },
			            data: [
			                {
			                    value: values,
			                    areaStyle: {
			                        normal: {
			                            color: 'rgba(255, 255, 255, 0.5)'
			                        }
			                    }
			                }
			            ]
			        }
			    ]
			}
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
		
		var m_CurrentSelectMonitorPara = "COD";
				
		$('#waterqchart01ID').click(function () {
		    m_CurrentSelectMonitorPara = "COD";
		    circleChartChange();
		});
		$('#waterqchart02ID').click(function () {
		    m_CurrentSelectMonitorPara = "TN";
		    circleChartChange();
		});
		$('#waterqchart03ID').click(function () {
		    m_CurrentSelectMonitorPara = "TP";
		    circleChartChange();
		});
		$('#waterqchart04ID').click(function () {
		    m_CurrentSelectMonitorPara = "N3";
		    circleChartChange();
		});
		
		function initialWaterQChart01Control(value01, value02)
		{
			var dom = document.getElementById("waterqchart01ID");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			app.title = '用户在线图';
			
			var tmpLabelColor = '#f2f2f2';
			if(m_CurrentSelectMonitorPara == "COD")
				tmpLabelColor = '#ff0000';
			
			option = {
			    tooltip: {
			        trigger: 'item',
			        formatter: "{a} <br/>含量:"+value01+" mg/L"
			    },
			    title: {
			         text: 'COD',
			         textStyle: {
			             color: tmpLabelColor,
			             fontSize: 20,
			             align: 'center'
			         },
			         x: 'center',
			         y: 'center',
			     },
			    color:['#FF0000','#E97D20'],
			    series: [
			        {
			            name:'COD',
			            type:'pie',
			            radius: ['50%', '70%'],
			            avoidLabelOverlap: false,
			            label: {
			                normal: {
			                    show: false,
			                    position: 'center'
			                },
			                emphasis: {
			                    show: false,
			                    textStyle: {
			                        fontSize: '24',
			                        color:'#00fcff',
			                        fontWeight: 'bold'
			                    }
			                }
			            },
			            labelLine: {
			                normal: {
			                    show: false
			                }
			            },
			            data:[
			                {value:value01, name:'占比'},
			                {value:value02 - value01, name:'余下'}
			            ]
			        }
			    ]
			};		
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}

		function initialWaterQChart02Control(value01, value02)
		{
			var dom = document.getElementById("waterqchart02ID");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;	
			var tmpLabelColor = '#f2f2f2';
			if(m_CurrentSelectMonitorPara == "TN")
				tmpLabelColor = '#ff0000';
			option = {
			    tooltip: {
			        trigger: 'item',
			        formatter: "{a} <br/>含量:"+value01+" mg/L"
			    },
			    title: {
			         text: '总氮',
			         textStyle: {
			             color: tmpLabelColor,
			             fontSize: 20,
			             align: 'center'
			         },
			         x: 'center',
			         y: 'center',
			     },
			    color:['#FF0000','#B5C334'],
			    series: [
			        {
			            name:'总氮',
			            type:'pie',
			            radius: ['50%', '70%'],
			            avoidLabelOverlap: false,
			            label: {
			                normal: {
			                    show: false,
			                    position: 'center'
			                },
			                emphasis: {
			                    show: false,
			                    textStyle: {
			                        fontSize: '24',
			                        color:'#00fcff',
			                        fontWeight: 'bold'
			                    }
			                }
			            },
			            labelLine: {
			                normal: {
			                    show: false
			                }
			            },
			            data:[
			                {value:value01, name:'占比'},
			                {value:value02 - value01, name:'余下'}
			            ]
			        }
			    ]
			};		
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
		
		function initialWaterQChart03Control(value01, value02)
		{
			var dom = document.getElementById("waterqchart03ID");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;		
			var tmpLabelColor = '#f2f2f2';
			if(m_CurrentSelectMonitorPara == "TP")
				tmpLabelColor = '#ff0000';
			option = {
			    tooltip: {
			        trigger: 'item',
			        formatter: "{a} <br/>含量:"+value01+" mg/L"
			    },
			    title: {
			         text: '总磷',
			         textStyle: {
			             color: tmpLabelColor,
			             fontSize: 20,
			             align: 'center'
			         },
			         x: 'center',
			         y: 'center',
			     },
			    color:['#FF0000','#27727B'],
			    series: [
			        {
			            name:'总磷',
			            type:'pie',
			            radius: ['50%', '70%'],
			            avoidLabelOverlap: false,
			            label: {
			                normal: {
			                    show: false,
			                    position: 'center'
			                },
			                emphasis: {
			                    show: false,
			                    textStyle: {
			                        fontSize: '24',
			                        color:'#00fcff',
			                        fontWeight: 'bold'
			                    }
			                }
			            },
			            labelLine: {
			                normal: {
			                    show: false
			                }
			            },
			            data:[
			                {value:value01, name:'占比'},
			                {value:value02 - value01, name:'余下'}
			            ]
			        }
			    ]
			};		
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
		function initialWaterQChart04Control(value01, value02)
		{
			var dom = document.getElementById("waterqchart04ID");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;	
			var tmpLabelColor = '#f2f2f2';
			if(m_CurrentSelectMonitorPara == "N3")
				tmpLabelColor = '#ff0000';
			option = {
			    tooltip: {
			        trigger: 'item',
			        formatter: "{a} <br/>含量:"+value01+" mg/L"
			    },
			    title: {
			         text: '氨氮',
			         textStyle: {
			             color: tmpLabelColor,
			             fontSize: 20,
			             align: 'center'
			         },
			         x: 'center',
			         y: 'center',
			     },
			    color:['#FF0000','#60C0DD'],
			    series: [
			        {
			            name:'氨氮',
			            type:'pie',
			            radius: ['50%', '70%'],
			            avoidLabelOverlap: false,
			            label: {
			                normal: {
			                    show: false,
			                    position: 'center'
			                },
			                emphasis: {
			                    show: false,
			                    textStyle: {
			                        fontSize: '24',
			                        color:'#00fcff',
			                        fontWeight: 'bold'
			                    }
			                }
			            },
			            labelLine: {
			                normal: {
			                    show: false
			                }
			            },
			            data:[
			                {value:value01, name:'占比'},
			                {value:value02 - value01, name:'余下'}
			            ]
			        }
			    ]
			};		
			;
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
				
		function initialWaterQCurverChartControl()
		{
			var dom = document.getElementById("centerBotDiv");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;	
			
			option = {
			    tooltip: {
			        trigger: 'axis'
			    },
			    legend: {
			    	orient: 'vertical',
					left: 'right',
					y: 'center',
			        data:['总磷','总氮','氨氮','COD'],
			        textStyle:{//图例文字的样式
			            color:'#ccc',
			            fontSize:16
			        }
			    },
			    grid: {
			        left: 60,
			        right: 100,
			        bottom: '3%',
			        top:'4%',
			        containLabel: true
			    },			    
			    xAxis: {
			        type: 'category',
			        boundaryGap: false,
			        data: ['1#','2#','3#','4#','5#','6#','7#'],
			        splitLine:{show:false},
			        axisLine:{
					    lineStyle:{
					        color:'#0087ED',
					        width:1,//这里是为了突出显示加上的
					    }
					},
			        axisLabel: {
			            show: true,
			            textStyle: {
			                color: '#0087ED',
			                fontSize:16
			            }
			        }		
			    },
			    yAxis: {
			        type: 'value',
			        splitLine:{show:false},
			        axisLine:{
					    lineStyle:{
					        color:'#0087ED',
					        width:1,//这里是为了突出显示加上的
					    }
					},
					axisLabel: {
			            show: true,
			            textStyle: {
			                color: '#0087ED',
			                fontSize:16
			            }
			        }
			    },
			    series: [
			        {
			            name:'总磷',
			            type:'line',			            
			            //stack: '总量',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(1, 132, 213, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(1, 132, 213, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#0184d5',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
						
			            data:[120, 132, 101, 134, 90, 230, 210]
			        },
			        {
			            name:'总氮',
			            type:'line',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(0, 216, 135, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(0, 216, 135, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#00d887',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
			            data:[220, 182, 191, 234, 290, 330, 310]
			        },
			        {
			            name:'氨氮',
			            type:'line',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(255, 0, 0, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(255, 0, 0, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#FF0000',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
						
			            data:[150, 232, 201, 154, 190, 330, 410]
			        },
			        {
			            name:'COD',
			            type:'line',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(233, 125, 32, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(233, 125, 32, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#E97D20',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
			            data:[320, 332, 301, 334, 390, 330, 320]
			        }
			    ]
			};
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
				
		initialChartCircle([0,0,0,0,0]);
		initialWaterQChart01Control(15,20);//COD
		initialWaterQChart02Control(0.5,1);//总氮
		initialWaterQChart03Control(0.1,0.2);//总磷
		initialWaterQChart04Control(0.5,1);//氨氮
		
		initialWaterQCurverChartControl();
				
		function dateToString(date){ 
		  var year = date.getFullYear(); 
		  var month =(date.getMonth() + 1).toString(); 
		  var day = (date.getDate()).toString();  
		  if (month.length == 1) { 
		      month = "0" + month; 
		  } 
		  if (day.length == 1) { 
		      day = "0" + day; 
		  }
		  var dateTime = year + "-" + month + "-" + day;
		  return dateTime; 
		}
				
		function refreshSchedulingPlan(queryDataTime)
		{						
			var param="101#"+queryDataTime+"#DD#lsd"; 
			RunWebServiceJSON(true, "getAlldispatchplan", 
					"/pms/Base", "/doreaddata/getdata", 
					"topocode#time#sort#userCode", param, function (data) {
						var jqueryObj = $(data);
						var message = jqueryObj.children();
						var text = message.text();
						var tmpObjs = eval("(" + text + ")");
						var tmpDTUTBHTML = '<tbody>'
                        	+'<tr class="aaa" align="center">';
                        //列头
                        tmpDTUTBHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:100px;">方案名称</td>';
                        tmpDTUTBHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:50px;">方案编码</td>';
                        tmpDTUTBHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:50px;">操作</td>';
			            tmpDTUTBHTML+='</tr>';
			            
			            var tmpTTTid = 0;
			            var tmpPlanID = '';
			            var tmpDefaultBtnID = '';
			            for(var tmpI in tmpObjs){
			            	var tmpitem01 = tmpObjs[tmpI];
			            	var tmpBtnID = 'btn_tb_op_'+tmpI;
			            	tmpDTUTBHTML+='<tr class="aaa" style="font-size: 16px;" align="center" >'
			            		+'<td style="color: #00fcff; font-size: 18px; padding: 5px 0;" onclick="openPlanInfo(\''+tmpitem01.planmsg+'\');">'+tmpitem01.PlanCode
			            		+'</td><td style="color: #00fcff; font-size: 18px; padding: 5px 0;">'+tmpitem01.planID
			            		+'</td><td style="color: #00fcff; font-size: 18px; padding: 5px 0;"><button id="'+tmpBtnID+'" class="b2" onclick="exeSchedulingPlan(this,\''
			            		+tmpitem01.planID+'\')">执行</button>'
			            		+'</td></tr>';
			            	if(tmpPlanID == '')
			            		tmpPlanID = tmpitem01.planID;
			            	if(tmpDefaultBtnID == '')
			            		tmpDefaultBtnID = tmpBtnID;
			            	tmpTTTid++;
			            	if(tmpTTTid >= 5)
			            		break;
			            }
			            $("#planTable").html(tmpDTUTBHTML);
			            if(tmpPlanID!='')
			            	exeSchedulingPlan(document.getElementById(tmpDefaultBtnID), tmpPlanID);
					});
		}
		
		var m_SchedulingPlanDataArray = [];
		var m_SchedulingPlanTimeArray = [];
		var m_AutoloopIntervalID = undefined;
		
		/***
		 * 执行方案
		 * @param {Object} planID 方案编号
		 */
		function exeSchedulingPlan(btn, planID)
		{
			//circleChartChange();
			
			$(".b1").addClass("b2");
			$(".b1").text('执行');
			$(".b1").removeClass("b1");
			if(btn!=undefined){
				$(btn).removeClass("b2");
				$(btn).addClass("b1");
				$(btn).text('执行中');
			}
			
			m_SchedulingPlanDataArray = [];
			m_SchedulingPlanTimeArray = [];
			for(var i=0;i<26;i++)
			{
				m_SchedulingPlanDataArray[i] = null;
				m_SchedulingPlanTimeArray[i] = '';
			}	
			if(m_AutoloopIntervalID!=undefined)
				clearInterval(m_AutoloopIntervalID);
			
			for(var i0=0;i0<26;i0++)
			{
				RunWebServiceJSON(true, "getTSDBLeveldata", "/pms/Base", "/doreaddata/getdata",
			        "guid#timeindex", String(planID)+"#"+i0, function (data) {
			        	//m_SchedulingPlanDataArray[i0-1] = null;			        	
						var jqueryObj = $(data);
						var message = jqueryObj.children();
						var text = message.text();
						var tmpObjs = eval("(" + text + ")");
						var tmpDataArray = [], tmpDataArray2 = [];
						var tmpTid = 0, tmpTid2 = 0;
						var tmpTimInt = -1;
						var tmpSkipFirst = true;
						
						for(var tmpI in tmpObjs){
							var tmpObj = tmpObjs[tmpI];
							if(tmpTimInt == -1)
								tmpTimInt = parseInt(tmpObj.MAXS);
							tmpDataArray2[tmpTid2++] = parseFloat(tmpObj.V);
							if(tmpTid2==58)
							{
								//if(tmpSkipFirst == false)
								{
									tmpDataArray[tmpTid++] = tmpDataArray2;
									m_SchedulingPlanTimeArray[tmpTimInt] = tmpObj.TIME;
									tmpDataArray2 = [];
									tmpTid2 = 0;
								}
								tmpSkipFirst = false;								
							}							
						}
						tmpDataArray[tmpTid++] = tmpDataArray2;//总磷、总氮、氨氮、COD
						m_SchedulingPlanDataArray[tmpTimInt] = tmpDataArray;
						//m_SchedulingPlanTimeArray[tmpTimInt] = '';//时刻
						if(tmpTimInt==0)
						{
							initialWaterQCurverChartControlByPlan(tmpDataArray);
							$('#myRange').val(0);
							m_CurrentSchedulingIndex = 0;
							if(m_AutoloopIntervalID!=undefined)
								clearInterval(m_AutoloopIntervalID);
							m_AutoloopIntervalID = setInterval(startLoopSchedulingIndex,3000);///刷新数据
						}
									///////////////////////////////////////////////////////
						var tmpSectionIndex = $('#sectionSlID').val() - 1;
						var tmpSectionID = m_sectionID[tmpSectionIndex]-1;
						//总磷、总氮、氨氮、COD
						
						if (tmpTimInt==0)
						     fillReport(0,m_SchedulingPlanDataArray[0]);
						/////////**********************//////////////半小时
						if (tmpTimInt==5)
						     fillReport(5,m_SchedulingPlanDataArray[5]);
					     if (tmpTimInt==11)
					     fillReport(11,m_SchedulingPlanDataArray[11]);
					     if (tmpTimInt==23)
					     fillReport(23,m_SchedulingPlanDataArray[23]);
						////////////***********************//////////////
						///////////////////////////////////////////////////////
				});
			}

		}
		//tmpTimInt="";
		function fillReport(index,dataArray)
		{
			var tmpArray = dataArray;
			if (index==0){
				//var tmpArray = m_SchedulingPlanDataArray[m_CurrentSchedulingIndex];
							for(var tmpI in tmpArray) {
							var tmpObj = tmpArray[tmpI];
							//横沥口
							if(tmpI == 0) 
								{hlk_zong_dan=tmpObj[0];
								hlk_zong_dan = Number(hlk_zong_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 1) 
								{hlk_zong_lin=tmpObj[0];
								hlk_zong_lin = Number(hlk_zong_lin.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 3) 
								{hlk_COD_zhi=tmpObj[0];
								hlk_COD_zhi = Number(hlk_COD_zhi.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 2) 
								{hlk_an_dan=tmpObj[0];
								hlk_an_dan = Number(hlk_an_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							
							//茂仔水
							if(tmpI == 0) 
								{mzs_zong_dan=tmpObj[16];
								mzs_zong_dan = Number(mzs_zong_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 1) 
								{mzs_zong_lin=tmpObj[16];
								mzs_zong_lin = Number(mzs_zong_lin.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 3) 
								{mzs_COD_zhi=tmpObj[16];
								mzs_COD_zhi = Number(mzs_COD_zhi.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 2) 
								{mzs_an_dan=tmpObj[16];
								mzs_an_dan = Number(mzs_an_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}							
							
							//赤水洞水
							if(tmpI == 0) 
								{cs_zong_dan=tmpObj[24];
								cs_zong_dan = Number(cs_zong_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 1) 
								{cs_zong_lin=tmpObj[24];
								cs_zong_lin = Number(cs_zong_lin.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 3) 
								{cs_COD_zhi=tmpObj[24];
								cs_COD_zhi = Number(cs_COD_zhi.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 2) 
								{cs_an_dan=tmpObj[24];
								cs_an_dan = Number(cs_an_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}							
							
							//新田仔水
							if(tmpI == 0) 
								{xt_zong_dan=tmpObj[50];
								xt_zong_dan = Number(xt_zong_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 1) 
								{xt_zong_lin=tmpObj[50];
								xt_zong_lin = Number(xt_zong_lin.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 3) 
								{xt_COD_zhi=tmpObj[50];
								xt_COD_zhi = Number(xt_COD_zhi.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 2) 
								{xt_an_dan=tmpObj[50];
								xt_an_dan = Number(xt_an_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							
							//深圳水库
							if(tmpI == 0) 
								{sz_zong_dan=tmpObj[56];
								sz_zong_dan = Number(sz_zong_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 1) 
								{sz_zong_lin=tmpObj[56];
								sz_zong_lin = Number(sz_zong_lin.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 3) 
								{sz_COD_zhi=tmpObj[56];
								sz_COD_zhi = Number(sz_COD_zhi.toString().match(/^\d+(?:\.\d{0,2})?/));}
							if(tmpI == 2) 
								{sz_an_dan=tmpObj[56];
								sz_an_dan = Number(sz_an_dan.toString().match(/^\d+(?:\.\d{0,2})?/));}
							}
						$("#hlk_zong_dan").text(hlk_zong_dan);
						$("#hlk_zong_lin").text(hlk_zong_lin);
						$("#hlk_COD_zhi").text(hlk_COD_zhi);
						$("#hlk_an_dan").text(hlk_an_dan);
						
						$("#mzs_zong_dan").text(mzs_zong_dan);
						$("#mzs_zong_lin").text(mzs_zong_lin);
						$("#mzs_COD_zhi").text(mzs_COD_zhi);
						$("#mzs_an_dan").text(mzs_an_dan);
						
						$("#cs_zong_dan").text(cs_zong_dan);
						$("#cs_zong_lin").text(cs_zong_lin);
						$("#cs_COD_zhi").text(cs_COD_zhi);
						$("#cs_an_dan").text(cs_an_dan);
						
						$("#xt_zong_dan").text(xt_zong_dan);
						$("#xt_zong_lin").text(xt_zong_lin);
						$("#xt_COD_zhi").text(xt_COD_zhi);
						$("#xt_an_dan").text(xt_an_dan);
						
						$("#sz_zong_dan").text(sz_zong_dan);
						$("#sz_zong_lin").text(sz_zong_lin);
						$("#sz_COD_zhi").text(sz_COD_zhi);
						$("#sz_an_dan").text(sz_an_dan);
						
						$("#mzs_zong_dan").text(mzs_zong_dan);
						$("#mzs_zong_lin").text(mzs_zong_lin);
						$("#mzs_COD_zhi").text(mzs_COD_zhi);
						$("#mzs_an_dan").text(mzs_an_dan);
			}
			
			if (index==5){
	
					for(var tmpI in tmpArray) {
					var tmpObj = tmpArray[tmpI];
					//横沥口
					if(tmpI == 0) 
						{hlk_zong_dan_ban=tmpObj[0];
								hlk_zong_dan_ban = Number(hlk_zong_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{hlk_zong_lin_ban=tmpObj[0];
								hlk_zong_lin_ban = Number(hlk_zong_lin_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{hlk_COD_zhi_ban=tmpObj[0];
								hlk_COD_zhi_ban = Number(hlk_COD_zhi_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{hlk_an_dan_ban=tmpObj[0];
								hlk_an_dan_ban = Number(hlk_an_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					
					//茂仔水
					if(tmpI == 0) 
						{mzs_zong_dan_ban=tmpObj[16];
								mzs_zong_dan_ban = Number(mzs_zong_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{mzs_zong_lin_ban=tmpObj[16];
								mzs_zong_lin_ban = Number(mzs_zong_lin_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{mzs_COD_zhi_ban=tmpObj[16];
								mzs_COD_zhi_ban = Number(mzs_COD_zhi_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{mzs_an_dan_ban=tmpObj[16];
								mzs_an_dan_ban = Number(mzs_an_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}							
					
					//赤水洞水
					if(tmpI == 0) 
						{cs_zong_dan_ban=tmpObj[24];
								cs_zong_dan_ban = Number(cs_zong_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{cs_zong_lin_ban=tmpObj[24];
								cs_zong_lin_ban = Number(cs_zong_lin_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{cs_COD_zhi_ban=tmpObj[24];
								cs_COD_zhi_ban = Number(cs_COD_zhi_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{cs_an_dan_ban=tmpObj[24];
								cs_an_dan_ban = Number(cs_an_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}							
					
					//新田仔水
					if(tmpI == 0) 
						{xt_zong_dan_ban=tmpObj[50];
								xt_zong_dan_ban = Number(xt_zong_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{xt_zong_lin_ban=tmpObj[50];
								xt_zong_lin_ban = Number(xt_zong_lin_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{xt_COD_zhi_ban=tmpObj[50];
								xt_COD_zhi_ban = Number(xt_COD_zhi_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{xt_an_dan_ban=tmpObj[50];
								xt_an_dan_ban = Number(xt_an_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					
					//深圳水库
					if(tmpI == 0) 
						{sz_zong_dan_ban=tmpObj[56];
								sz_zong_dan_ban = Number(sz_zong_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{sz_zong_lin_ban=tmpObj[56];
								sz_zong_lin_ban = Number(sz_zong_lin_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{sz_COD_zhi_ban=tmpObj[56];
								sz_COD_zhi_ban = Number(sz_COD_zhi_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{sz_an_dan_ban=tmpObj[56];
								sz_an_dan_ban = Number(sz_an_dan_ban.toString().match(/^\d+(?:\.\d{0,2})?/));}
					}
				$("#hlk_zong_dan_ban").text(hlk_zong_dan_ban);
				$("#hlk_zong_lin_ban").text(hlk_zong_lin_ban);
				$("#hlk_COD_zhi_ban").text(hlk_COD_zhi_ban);
				$("#hlk_an_dan_ban").text(hlk_an_dan_ban);
				
				$("#mzs_zong_dan_ban").text(mzs_zong_dan_ban);
				$("#mzs_zong_lin_ban").text(mzs_zong_lin_ban);
				$("#mzs_COD_zhi_ban").text(mzs_COD_zhi_ban);
				$("#mzs_an_dan_ban").text(mzs_an_dan_ban);
				
				$("#cs_zong_dan_ban").text(cs_zong_dan_ban);
				$("#cs_zong_lin_ban").text(cs_zong_lin_ban);
				$("#cs_COD_zhi_ban").text(cs_COD_zhi_ban);
				$("#cs_an_dan_ban").text(cs_an_dan_ban);
				
				$("#xt_zong_dan_ban").text(xt_zong_dan_ban);
				$("#xt_zong_lin_ban").text(xt_zong_lin_ban);
				$("#xt_COD_zhi_ban").text(xt_COD_zhi_ban);
				$("#xt_an_dan_ban").text(xt_an_dan_ban);
				
				$("#sz_zong_dan_ban").text(sz_zong_dan_ban);
				$("#sz_zong_lin_ban").text(sz_zong_lin_ban);
				$("#sz_COD_zhi_ban").text(sz_COD_zhi_ban);
				$("#sz_an_dan_ban").text(sz_an_dan_ban);
				
				$("#mzs_zong_dan_ban").text(mzs_zong_dan_ban);
				$("#mzs_zong_lin_ban").text(mzs_zong_lin_ban);
				$("#mzs_COD_zhi_ban").text(mzs_COD_zhi_ban);
				$("#mzs_an_dan_ban").text(mzs_an_dan_ban);
			}
			
			if (index==11){
			
					for(var tmpI in tmpArray) {
					var tmpObj = tmpArray[tmpI];
					//横沥口
					if(tmpI == 0) 
						{hlk_zong_dan_yi=tmpObj[0];
								hlk_zong_dan_yi = Number(hlk_zong_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{hlk_zong_lin_yi=tmpObj[0];
								hlk_zong_lin_yi = Number(hlk_zong_lin_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{hlk_COD_zhi_yi=tmpObj[0];
								hlk_COD_zhi_yi = Number(hlk_COD_zhi_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{hlk_an_dan_yi=tmpObj[0];
								hlk_an_dan_yi = Number(hlk_an_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					
					//茂仔水
					if(tmpI == 0) 
						{mzs_zong_dan_yi=tmpObj[16];
								mzs_zong_dan_yi = Number(mzs_zong_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{mzs_zong_lin_yi=tmpObj[16];
								mzs_zong_lin_yi = Number(mzs_zong_lin_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{mzs_COD_zhi_yi=tmpObj[16];
								mzs_COD_zhi_yi = Number(mzs_COD_zhi_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{mzs_an_dan_yi=tmpObj[16];
								mzs_an_dan_yi = Number(mzs_an_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}							
					
					//赤水洞水
					if(tmpI == 0) 
						{cs_zong_dan_yi=tmpObj[24];
								cs_zong_dan_yi = Number(cs_zong_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{cs_zong_lin_yi=tmpObj[24];
								cs_zong_lin_yi = Number(cs_zong_lin_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{cs_COD_zhi_yi=tmpObj[24];
								cs_COD_zhi_yi = Number(cs_COD_zhi_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{cs_an_dan_yi=tmpObj[24];
								cs_an_dan_yi = Number(cs_an_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}							
					
					//新田仔水
					if(tmpI == 0) 
						{xt_zong_dan_yi=tmpObj[50];
								xt_zong_dan_yi = Number(xt_zong_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{xt_zong_lin_yi=tmpObj[50];
								xt_zong_lin_yi = Number(xt_zong_lin_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{xt_COD_zhi_yi=tmpObj[50];
								xt_COD_zhi_yi = Number(xt_COD_zhi_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{xt_an_dan_yi=tmpObj[50];
								xt_an_dan_yi = Number(xt_an_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					
					//深圳水库
					if(tmpI == 0) 
						{sz_zong_dan_yi=tmpObj[56];
								sz_zong_dan_yi = Number(sz_zong_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{sz_zong_lin_yi=tmpObj[56];
								sz_zong_lin_yi = Number(sz_zong_lin_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{sz_COD_zhi_yi=tmpObj[56];
								sz_COD_zhi_yi = Number(sz_COD_zhi_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{sz_an_dan_yi=tmpObj[56];
								sz_an_dan_yi = Number(sz_an_dan_yi.toString().match(/^\d+(?:\.\d{0,2})?/));}
					}
				$("#hlk_zong_dan_yi").text(hlk_zong_dan_yi);
				$("#hlk_zong_lin_yi").text(hlk_zong_lin_yi);
				$("#hlk_COD_zhi_yi").text(hlk_COD_zhi_yi);
				$("#hlk_an_dan_yi").text(hlk_an_dan_yi);
				
				$("#mzs_zong_dan_yi").text(mzs_zong_dan_yi);
				$("#mzs_zong_lin_yi").text(mzs_zong_lin_yi);
				$("#mzs_COD_zhi_yi").text(mzs_COD_zhi_yi);
				$("#mzs_an_dan_yi").text(mzs_an_dan_yi);
				
				$("#cs_zong_dan_yi").text(cs_zong_dan_yi);
				$("#cs_zong_lin_yi").text(cs_zong_lin_yi);
				$("#cs_COD_zhi_yi").text(cs_COD_zhi_yi);
				$("#cs_an_dan_yi").text(cs_an_dan_yi);
				
				$("#xt_zong_dan_yi").text(xt_zong_dan_yi);
				$("#xt_zong_lin_yi").text(xt_zong_lin_yi);
				$("#xt_COD_zhi_yi").text(xt_COD_zhi_yi);
				$("#xt_an_dan_yi").text(xt_an_dan_yi);
				
				$("#sz_zong_dan_yi").text(sz_zong_dan_yi);
				$("#sz_zong_lin_yi").text(sz_zong_lin_yi);
				$("#sz_COD_zhi_yi").text(sz_COD_zhi_yi);
				$("#sz_an_dan_yi").text(sz_an_dan_yi);
				
				$("#mzs_zong_dan_yi").text(mzs_zong_dan_yi);
				$("#mzs_zong_lin_yi").text(mzs_zong_lin_yi);
				$("#mzs_COD_zhi_yi").text(mzs_COD_zhi_yi);
				$("#mzs_an_dan_yi").text(mzs_an_dan_yi);
			}
			if (index==23){
			
					for(var tmpI in tmpArray) {
					var tmpObj = tmpArray[tmpI];
					//横沥口
					if(tmpI == 0) 
						{hlk_zong_dan_er=tmpObj[0];
								hlk_zong_dan_er = Number(hlk_zong_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{hlk_zong_lin_er=tmpObj[0];
								hlk_zong_lin_er = Number(hlk_zong_lin_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{hlk_COD_zhi_er=tmpObj[0];
								hlk_COD_zhi_er = Number(hlk_COD_zhi_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{hlk_an_dan_er=tmpObj[0];
								hlk_an_dan_er = Number(hlk_an_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					
					//茂仔水
					if(tmpI == 0) 
						{mzs_zong_dan_er=tmpObj[16];
								mzs_zong_dan_er = Number(mzs_zong_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{mzs_zong_lin_er=tmpObj[16];
								mzs_zong_lin_er = Number(mzs_zong_lin_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{mzs_COD_zhi_er=tmpObj[16];
								mzs_COD_zhi_er = Number(mzs_COD_zhi_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{mzs_an_dan_er=tmpObj[16];
								mzs_an_dan_er = Number(mzs_an_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}							
					
					//赤水洞水
					if(tmpI == 0) 
						{cs_zong_dan_er=tmpObj[24];
								cs_zong_dan_er = Number(cs_zong_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{cs_zong_lin_er=tmpObj[24];
								cs_zong_lin_er = Number(cs_zong_lin_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{cs_COD_zhi_er=tmpObj[24];
								cs_COD_zhi_er = Number(cs_COD_zhi_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{cs_an_dan_er=tmpObj[24];
								cs_an_dan_er = Number(cs_an_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}							
					
					//新田仔水
					if(tmpI == 0) 
						{xt_zong_dan_er=tmpObj[50];
								xt_zong_dan_er = Number(xt_zong_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{xt_zong_lin_er=tmpObj[50];
								xt_zong_lin_er = Number(xt_zong_lin_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{xt_COD_zhi_er=tmpObj[50];
								xt_COD_zhi_er = Number(xt_COD_zhi_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{xt_an_dan_er=tmpObj[50];
								xt_an_dan_er = Number(xt_an_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					
					//深圳水库
					if(tmpI == 0) 
						{sz_zong_dan_er=tmpObj[56];
								sz_zong_dan_er = Number(sz_zong_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 1) 
						{sz_zong_lin_er=tmpObj[56];
								sz_zong_lin_er = Number(sz_zong_lin_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 3) 
						{sz_COD_zhi_er=tmpObj[56];
								sz_COD_zhi_er = Number(sz_COD_zhi_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					if(tmpI == 2) 
						{sz_an_dan_er=tmpObj[56];
								sz_an_dan_er = Number(sz_an_dan_er.toString().match(/^\d+(?:\.\d{0,2})?/));}
					}
				$("#hlk_zong_dan_er").text(hlk_zong_dan_er);
				$("#hlk_zong_lin_er").text(hlk_zong_lin_er);
				$("#hlk_COD_zhi_er").text(hlk_COD_zhi_er);
				$("#hlk_an_dan_er").text(hlk_an_dan_er);
				
				$("#mzs_zong_dan_er").text(mzs_zong_dan_er);
				$("#mzs_zong_lin_er").text(mzs_zong_lin_er);
				$("#mzs_COD_zhi_er").text(mzs_COD_zhi_er);
				$("#mzs_an_dan_er").text(mzs_an_dan_er);
				
				$("#cs_zong_dan_er").text(cs_zong_dan_er);
				$("#cs_zong_lin_er").text(cs_zong_lin_er);
				$("#cs_COD_zhi_er").text(cs_COD_zhi_er);
				$("#cs_an_dan_er").text(cs_an_dan_er);
				
				$("#xt_zong_dan_er").text(xt_zong_dan_er);
				$("#xt_zong_lin_er").text(xt_zong_lin_er);
				$("#xt_COD_zhi_er").text(xt_COD_zhi_er);
				$("#xt_an_dan_er").text(xt_an_dan_er);
				
				$("#sz_zong_dan_er").text(sz_zong_dan_er);
				$("#sz_zong_lin_er").text(sz_zong_lin_er);
				$("#sz_COD_zhi_er").text(sz_COD_zhi_er);
				$("#sz_an_dan_er").text(sz_an_dan_er);
				
				$("#mzs_zong_dan_er").text(mzs_zong_dan_er);
				$("#mzs_zong_lin_er").text(mzs_zong_lin_er);
				$("#mzs_COD_zhi_er").text(mzs_COD_zhi_er);
				$("#mzs_an_dan_er").text(mzs_an_dan_er);
			}
		}
		function initialWaterQCurverChartControlByPlan(dataArray)
		{
			var dom = document.getElementById("centerBotDiv");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;	
			
			var tmpXData = [];
			for(var tmpI = 1; tmpI < 58;tmpI++)
				tmpXData[tmpI-1] = String(tmpI)+"#";
			
			option = {
			    tooltip: {
			        trigger: 'axis'
			    },
			    legend: {
			    	orient: 'vertical',
					left: 'right',
					y: 'center',
			        data:['总磷','总氮','氨氮','COD'],
			        textStyle:{//图例文字的样式
			            color:'#ccc',
			            fontSize:16
			        }
			    },
			    grid: {
			        left: 60,
			        right: 100,
			        bottom: '3%',
			        top:'4%',
			        containLabel: true
			    },		
			    color:['#BF00A5','#80C7D6','#FF8923','#8060C0'],
			    xAxis: {
			        type: 'category',
			        boundaryGap: false,
			        data: tmpXData,//['1#','2#','3#','4#','5#','6#','7#'],
			        splitLine:{show:false},
			        axisLine:{
					    lineStyle:{
					        color:'#0087ED',
					        width:1,//这里是为了突出显示加上的
					    }
					},
			        axisLabel: {
			            show: true,
			            textStyle: {
			                color: '#0087ED',
			                fontSize:16
			            }
			        }		
			    },
			    yAxis: {
			        type: 'value',
			        splitLine:{show:false},
			        axisLine:{
					    lineStyle:{
					        color:'#0087ED',
					        width:1,//这里是为了突出显示加上的
					    }
					},
					axisLabel: {
			            show: true,
			            formatter: '{value} mg/L',
			            textStyle: {
			                color: '#0087ED',
			                fontSize:16
			            }
			        }
			    },
			    series: [
			        {
			            name:'总磷',
			            type:'line',			            
			            //stack: '总量',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(1, 132, 213, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(1, 132, 213, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#0184d5',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
						
			            data:dataArray[0]
			        },
			        {
			            name:'总氮',
			            type:'line',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(0, 216, 135, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(0, 216, 135, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#00d887',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
			            data:dataArray[1]
			        },
			        {
			            name:'氨氮',
			            type:'line',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(255, 0, 0, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(255, 0, 0, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#FF0000',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
						
			            data:dataArray[2]
			        },
			        {
			            name:'COD',
			            type:'line',
			            symbol: 'circle',  //这句就是去掉点的  
			            symbolSize: 5,
        				showSymbol: false,
			            smooth: true,
			            areaStyle: {
				            normal: {
				                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
				                    offset: 0,
				                    color: 'rgba(233, 125, 32, 0.2)'
				                }, {
				                    offset: 0.8,
				                    color: 'rgba(233, 125, 32, 0.1)'
				                }], false),
				                shadowColor: 'rgba(0, 0, 0, 0.1)',
				            }
				        },
						itemStyle: {
							normal: {
								color: '#E97D20',
								borderColor: 'rgba(221, 220, 107, .1)',
								borderWidth: 12
							}
						},
			            data:dataArray[3]
			        }
			        
			    ]
			};
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
		
		function waterQIndexChange()
		{
			gotoSchedulingIndex();
			var tmpI = $('#myRange').val();
			m_CurrentSchedulingIndex = tmpI;
		}
		
		var m_CurrentSchedulingIndex = 0;
		
		function startLoopSchedulingIndex()
		{
			var tmpLen = m_SchedulingPlanDataArray.length;
			if(m_CurrentSchedulingIndex>=tmpLen)
				m_CurrentSchedulingIndex = 0;
			
			$('#myRange').val(m_CurrentSchedulingIndex);//.trigger('change');
			//initialWaterQCurverChartControlByPlan(m_SchedulingPlanDataArray[m_CurrentSchedulingIndex]);
			gotoSchedulingIndex();
			m_CurrentSchedulingIndex++;
		}
		
		function gotoSchedulingIndex()
		{
			var tmpI = $('#myRange').val();
			var tmpArray = m_SchedulingPlanDataArray[tmpI];
			if(tmpArray!=null)
			{
				initialWaterQCurverChartControlByPlan(tmpArray);
				$('#labelRangeValueID').text(" "+m_SchedulingPlanTimeArray[tmpI]);	
				var tmpIndex = 0;
				if(m_CurrentSelectMonitorPara == "TN")
					tmpIndex = 1;
				else if(m_CurrentSelectMonitorPara == "N3")
					tmpIndex = 2;	
				else if(m_CurrentSelectMonitorPara == "COD")
					tmpIndex = 3;					
				setRiverSectionsValue(tmpArray[tmpIndex]);//设置河道断面监测值
				circleChartChange();				
			}
		}
		/**
		 * 更新圆圈图标
		 */
		function circleChartChange()
		{
			var tmpSectionIndex = $('#sectionSlID').val() - 1;
			var tmpSectionID = m_sectionID[tmpSectionIndex]-1;
			//总磷、总氮、氨氮、COD
			var tmpArray = m_SchedulingPlanDataArray[m_CurrentSchedulingIndex];
			var tmpCOD = tmpArray[3][tmpSectionID];
			var tmpTN = tmpArray[1][tmpSectionID];
			var tmpTP = tmpArray[0][tmpSectionID];
			var tmpN3 = tmpArray[2][tmpSectionID];
			
			initialWaterQChart01Control(tmpCOD, 20);//COD
			initialWaterQChart02Control(tmpTN,tmpTN > 1?tmpTN:1);//总氮
			initialWaterQChart03Control(tmpTP,tmpTP > 0.2?tmpTP:0.2);//总磷
			initialWaterQChart04Control(tmpN3,tmpN3 > 1?tmpN3:1);//氨氮
			
			initialChartCircle([tmpArray[3][tmpSectionID],
				tmpArray[1][tmpSectionID],
				tmpArray[0][tmpSectionID],
				tmpArray[2][tmpSectionID],
				7]);	
				
			refreshWaterQLevelLabel(tmpTN, tmpTP, tmpN3, tmpCOD);			
		}
		/**
		 * 判断总的水质情况
		 * @param {Object} TN
		 * @param {Object} TP
		 * @param {Object} N3
		 * @param {Object} COD
		 */
		function refreshWaterQLevelLabel(TN,TP,N3,COD)
		{
			var tmpL01 = getWaterQLevelBySingleFactor(41, TP);//总磷
			var tmpL02 = getWaterQLevelBySingleFactor(42, COD);//化学需氧量
			var tmpL03 = getWaterQLevelBySingleFactor(43, N3);//氨氮
			var tmpL04 = getWaterQLevelBySingleFactor(44, TN);//总氮
			var tmpL00 = tmpL01;
			if(tmpL00 < tmpL02)
				tmpL00 = tmpL02;
			if(tmpL00 < tmpL03)
				tmpL00 = tmpL03;
			if(tmpL00 < tmpL04)
				tmpL00 = tmpL04;
			var tmpRomanStrs = ['Ⅰ','Ⅱ','Ⅲ','Ⅳ','Ⅴ','Ⅵ'];	
			vm.waterQClass = tmpRomanStrs[tmpL00-1];
		}
		
		function openPlanInfo(planName)
		{
			//planName = "水质应急事件0505001";
			RunWebServiceJSON(true, "getWaterqualityData", "/pms/Base", "/doreaddata/getdata",
		        "planname", planName, function (data) {
					var jqueryObj = $(data);
					var message = jqueryObj.children();
					var text = message.text();
					var tmpObjs = eval("(" + text + ")");
					
					var tmpTotalHTML = '<tr class="aaa" align="center">';
					//列头
                    tmpTotalHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:100px;">断面</td>';
                    tmpTotalHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:50px;">总氮</td>';
                    tmpTotalHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:50px;">总磷</td>';
                    tmpTotalHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:50px;">氨氮</td>';
                    tmpTotalHTML+='<td style="color: #00fcff; font-size: 18px; padding: 5px 0;width:50px;">COD</td>';
			        tmpTotalHTML+='</tr>';
			        
			        var tmpSectionnames = ['横沥口','茂仔水','赤水洞水','彩虹桥入库断面'];
					for(var tmpI in tmpObjs)
					{
						var tmpObj = tmpObjs[tmpI];
						tmpTotalHTML+='<tr class="aaa" style="font-size: 16px;" align="center" >'
			            		+'<td style="color: #00fcff; font-size: 18px; padding: 5px 0;">'+tmpSectionnames[tmpI]
			            		+'</td><td style="color: #00fcff; font-size: 18px; padding: 5px 0;">'+tmpObj.TN
			            		+'</td><td style="color: #00fcff; font-size: 18px; padding: 5px 0;">'+tmpObj.TP
			            		+'</td><td style="color: #00fcff; font-size: 18px; padding: 5px 0;">'+tmpObj.NH3N
			            		+'</td><td style="color: #00fcff; font-size: 18px; padding: 5px 0;">'+tmpObj.COD
			            		+'</td></tr>';
					}
					$('.bgPop2,.pop2').show();
					$('#pop2_tableID').html(tmpTotalHTML);
			});
		}
					        
		function getWaterQLevelBySingleFactor(Foctor,V)
        {
            var ret = 0;
            switch (Foctor)
	        {
                case 41://总磷
                    {
                        //0.02	0.1	0.2	0.3	0.4
                        if (V <= 0.1)
                            ret= 2;
                        else if (V <= 0.2)
                            ret= 3;
                        else if (V <= 0.3)
                            ret= 4;
                        else if (V <= 0.4)
                            ret = 5;
                        else
                            ret= 6;
                        break;
                    }
                case 42://化学需氧量
                    {
                        //15	15	20	30	40
                        if (V <= 15)
                            ret = 2;
                        else if (V <= 20)
                            ret = 3;
                        else if (V <= 30)
                            ret = 4;
                        else if (V <= 40)
                            ret = 5;
                        else
                            ret = 6;
                        break;
                    }
                case 43://氨氮
                    {
                        //0.15	0.5	1	1.5	2
                        if (V <= 0.5)
                            ret = 2;
                        else if (V <= 1)
                            ret = 3;
                        else if (V <= 1.5)
                            ret = 4;
                        else if (V <= 2)
                            ret = 5;
                        else
                            ret = 6;
                        break;
                    }
                case 44://总氮
                    {
                        //0.2	0.5	1	1.5	2
                        if (V <= 0.5)
                            ret = 2;
                        else if (V <= 1)
                            ret = 3;
                        else if (V <= 1.5)
                            ret = 4;
                        else if (V <= 2)
                            ret = 5;
                        else
                            ret = 6;
                        break;
                    }
                case 50://DO
                    {
                        //6	5	3	2
                        if (V >= 6)
                            ret = 2;
                        else if (V >= 5)
                            ret = 3;
                        else if (V >= 3)
                            ret = 4;
                        else if (V >= 2)
                            ret = 5;
                        else
                            ret = 6;
                        break;
                    }
                default:
                    ret=0;
                    break;
	        }
            return ret;
        }					        
		
		function showDateSelect()
		{
			var tmpStrs = m_CurrentQueryData.split('-');
			$("#dateYearSelectID").val(parseInt(tmpStrs[0]));
			$("#dateMonthSelectID").val(parseInt(tmpStrs[1]));
			$("#dateDaySelectID").val(parseInt(tmpStrs[2]));
			$('.bgPop3,.pop3').show();			
		}
		
		/**点击地图可缩放*/
		$("#switchMapZoomID").click(function(){
			var draw = new ol.interaction.MouseWheelZoom();
			M_map.addInteraction(draw);			
			$("#switchMapZoomID").unbind("click");
		});
		
		var m_sectionID = [1,17,25,51,57];
		
		/**查询的日期*/
		var m_CurrentQueryData = dateToString(new Date());
		
		refreshSchedulingPlan(m_CurrentQueryData);
				
		//exeSchedulingPlan(undefined, "9695");
					
	</script>
		<script>
			
			 $("#chuxian_dianji").click(function(event){ 
			 	//取消冒泡事件
			 	event.stopPropagation();//这句是必须 //若css已经给divTop定位则不需要再定位 
			 	var offset = $(event.target).offset();
			 	$(".shuizhi_dianjitanchu").css({
		 			top:offset.top+$(event.target).height+"px",left:offset.left
		 		});
			 	$(".shuizhi_dianjitanchu").slideToggle(); 
			 });
			 
		 	//点击空白或者其他区域时divTop隐藏
		 	$(document).click(function(){ $(".shuizhi_dianjitanchu").slideUp('slow'); }); 
		 	//点击divTop自身隐藏 
//			$(".shuizhi_dianjitanchu").click(function(){ $(this.fadeOut(1000)); })
			$(".shuizhi_dianjitanchu").click(function(event){
				event.stopPropagation();
			}); 



		</script>
		
	</body>
</html>
